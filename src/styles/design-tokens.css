/**
 * Design Tokens - AI Medical Assistant
 *
 * 基于 UI/UX Pro Max 医疗产品设计系统
 * 符合 WCAG 2.1 AA 标准
 *
 * Generated: 2026-01-22
 */

/* ============================================
   字体导入
   ============================================ */
@import url('https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;500;600;700&family=Noto+Sans:wght@300;400;500;700&display=swap');

/* ============================================
   CSS 变量 - 根作用域
   ============================================ */
:root {
  /* ========== 颜色系统 - 医疗信任蓝 ========== */

  /* 主色调 - 冷静专业 */
  --color-primary: #0891B2;
  --color-primary-dark: #0E7490;
  --color-primary-light: #06B6D4;
  --color-primary-50: rgba(8, 145, 178, 0.05);
  --color-primary-100: rgba(8, 145, 178, 0.1);
  --color-primary-200: rgba(8, 145, 178, 0.2);

  /* 辅助色 - 清新活力 */
  --color-secondary: #22D3EE;
  --color-secondary-dark: #06B6D4;
  --color-secondary-light: #67E8F9;

  /* CTA - 深蓝绿色（与信任蓝主题协调） */
  --color-cta: #0E7490;
  --color-cta-dark: #164E63;
  --color-cta-light: #0891B2;
  --color-cta-hover: #164E63;
  --color-cta-50: rgba(14, 116, 144, 0.05);
  --color-cta-100: rgba(14, 116, 144, 0.1);
  --color-cta-200: rgba(14, 116, 144, 0.2);

  /* 背景色 - 轻柔蓝白 */
  --color-background: #ECFEFF;
  --color-background-white: #FFFFFF;
  --color-background-gray: #F8FAFC;

  /* 文本颜色 - 深蓝灰 */
  --color-text-primary: #164E63;
  --color-text-strong: #0F172A;
  --color-text-medium: #334155;
  --color-text-weak: #475569;
  --color-text-muted: #64748B;
  --color-text-disabled: #94A3B8;

  /* 状态颜色 */
  --color-success: #10B981;
  --color-success-bg: #D1FAE5;
  --color-success-border: #6EE7B7;

  --color-warning: #F59E0B;
  --color-warning-bg: #FEF3C7;
  --color-warning-border: #FCD34D;

  --color-error: #DC2626;
  --color-error-bg: #FEE2E2;
  --color-error-border: #FCA5A5;

  --color-info: #2563EB;
  --color-info-bg: #DBEAFE;
  --color-info-border: #93C5FD;

  /* 边框颜色 */
  --color-border-light: #E2E8F0;
  --color-border-medium: #CBD5E1;
  --color-border-strong: #94A3B8;

  /* 表面颜色 - 玻璃态效果 */
  --surface-glass: rgba(255, 255, 255, 0.85);
  --surface-glass-strong: rgba(255, 255, 255, 0.95);
  --surface-overlay: rgba(0, 0, 0, 0.5);

  /* ========== 字体系统 ========== */

  /* 字体族 */
  --font-heading: 'Figtree', -apple-system, BlinkMacSystemFont, 'Segoe UI',
                  'PingFang SC', 'Microsoft YaHei', sans-serif;
  --font-body: 'Noto Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI',
               'PingFang SC', 'Microsoft YaHei', sans-serif;
  --font-mono: 'SF Mono', 'Monaco', 'Consolas', 'Liberation Mono', monospace;

  /* 字体大小 */
  --font-size-xs: 12px;      /* 0.75rem */
  --font-size-sm: 14px;      /* 0.875rem */
  --font-size-base: 16px;    /* 1rem */
  --font-size-lg: 18px;      /* 1.125rem */
  --font-size-xl: 20px;      /* 1.25rem */
  --font-size-2xl: 24px;     /* 1.5rem */
  --font-size-3xl: 30px;     /* 1.875rem */
  --font-size-4xl: 36px;     /* 2.25rem */

  /* 字重 */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* 行高 */
  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;
  --line-height-loose: 2;

  /* ========== 间距系统 ========== */

  --space-0: 0;
  --space-xs: 4px;           /* 0.25rem */
  --space-sm: 8px;           /* 0.5rem */
  --space-md: 16px;          /* 1rem */
  --space-lg: 24px;          /* 1.5rem */
  --space-xl: 32px;          /* 2rem */
  --space-2xl: 48px;         /* 3rem */
  --space-3xl: 64px;         /* 4rem */

  /* ========== 圆角系统 ========== */

  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* ========== 阴影系统 ========== */

  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
  --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);

  /* 焦点阴影 */
  --shadow-focus: 0 0 0 3px var(--color-primary-200);
  --shadow-focus-error: 0 0 0 3px rgba(220, 38, 38, 0.2);

  /* ========== 动画系统 ========== */

  /* 时长 */
  --duration-instant: 50ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;

  /* 缓动函数 */
  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-smooth: cubic-bezier(0.25, 1, 0.5, 1);

  /* ========== 焦点系统 ========== */

  --focus-ring: 3px solid var(--color-primary);
  --focus-ring-offset: 2px;
  --focus-ring-error: 3px solid var(--color-error);

  /* ========== Z-Index 层级 ========== */

  --z-base: 0;
  --z-dropdown: 10;
  --z-sticky: 20;
  --z-fixed: 30;
  --z-modal-backdrop: 40;
  --z-modal: 50;
  --z-popover: 60;
  --z-tooltip: 70;
  --z-notification: 80;
  --z-max: 9999;

  /* ========== 触摸目标 ========== */

  --touch-target-min: 44px;

  /* ========== 断点 (仅供参考，实际使用媒体查询) ========== */

  --breakpoint-sm: 375px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1440px;
}

/* ============================================
   全局重置和基础样式
   ============================================ */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  /* 注意：不要在 body 上设置 background-color，保持透明以支持 Tauri 透明窗口 */
  background-color: transparent;
}

/* ============================================
   焦点样式 - 可访问性关键
   ============================================ */

/* 全局焦点样式 */
*:focus-visible {
  outline: var(--focus-ring);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-sm);
}

/* 移除默认 outline（仅在非键盘导航时） */
*:focus:not(:focus-visible) {
  outline: none;
}

/* 按钮焦点样式 */
button:focus-visible {
  outline: var(--focus-ring);
  outline-offset: 2px;
}

/* 输入框焦点样式 */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: var(--focus-ring);
  outline-offset: 0;
  border-color: var(--color-primary);
  box-shadow: var(--shadow-focus);
}

/* 错误状态焦点 */
input.error:focus-visible,
textarea.error:focus-visible {
  outline: var(--focus-ring-error);
  border-color: var(--color-error);
  box-shadow: var(--shadow-focus-error);
}

/* ============================================
   光标样式 - 交互反馈
   ============================================ */

/* 可点击元素 */
[role="button"],
[onclick],
button:not(:disabled),
a,
label[for],
input[type="checkbox"],
input[type="radio"],
select,
.clickable,
.cursor-pointer {
  cursor: pointer;
}

/* 禁用状态 */
button:disabled,
[disabled],
.disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* 文本选择 */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="tel"],
input[type="url"],
textarea {
  cursor: text;
}

/* ============================================
   减少动画 - 可访问性支持
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* 保持必要的过渡效果，但缩短时长 */
  .morph-enter-active,
  .morph-leave-active,
  .toast-fade-enter-active,
  .toast-fade-leave-active {
    transition-duration: 50ms !important;
  }
}

/* ============================================
   跳转导航链接 - 键盘可访问性
   ============================================ */

.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--color-primary);
  color: white;
  padding: var(--space-sm) var(--space-md);
  text-decoration: none;
  z-index: var(--z-max);
  border-radius: 0 0 var(--radius-sm) 0;
  font-weight: var(--font-weight-semibold);
  transition: top var(--duration-fast) var(--ease-out);
}

.skip-link:focus {
  top: 0;
}

/* ============================================
   实用工具类
   ============================================ */

/* 屏幕阅读器专用 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* 隐藏但保留空间 */
.invisible {
  visibility: hidden;
}

/* 完全隐藏 */
.hidden {
  display: none;
}

/* 响应式显示 */
@media (max-width: 767px) {
  .hide-on-mobile {
    display: none !important;
  }
}

@media (min-width: 768px) {
  .show-on-mobile-only {
    display: none !important;
  }
}

/* ============================================
   按钮基础样式
   ============================================ */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: 12px 24px;
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  line-height: 1;
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-out);
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  user-select: none;
}

.btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn:active:not(:disabled) {
  transform: translateY(0);
}

/* 主按钮 */
.btn-primary {
  background: var(--color-cta);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background: var(--color-cta-hover);
}

/* 次级按钮 */
.btn-secondary {
  background: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--color-primary-50);
}

/* 危险按钮 */
.btn-danger {
  background: var(--color-error);
  color: white;
}

.btn-danger:hover:not(:disabled) {
  background: #B91C1C;
}

/* 加载状态 */
.btn-loading {
  position: relative;
  pointer-events: none;
}

.btn-loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  top: 50%;
  left: 50%;
  margin-left: -8px;
  margin-top: -8px;
  border: 2px solid transparent;
  border-top-color: currentColor;
  border-radius: var(--radius-full);
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ============================================
   卡片样式
   ============================================ */

.card {
  background: var(--color-background-white);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow-md);
  transition: all var(--duration-normal) var(--ease-out);
}

.card:hover {
  box-shadow: var(--shadow-lg);
  transform: translateY(-2px);
}

.card-glass {
  background: var(--surface-glass);
  backdrop-filter: blur(8px);
  border: 1px solid var(--color-border-light);
}

/* ============================================
   输入框样式
   ============================================ */

.input,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="tel"],
input[type="url"],
input[type="number"],
textarea,
select {
  width: 100%;
  padding: 12px 16px;
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
  background: var(--color-background-white);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-md);
  transition: all var(--duration-normal) var(--ease-out);
}

.input:hover,
input:hover,
textarea:hover,
select:hover {
  border-color: var(--color-border-medium);
}

.input::placeholder,
input::placeholder,
textarea::placeholder {
  color: var(--color-text-muted);
}

/* 错误状态 */
.input.error,
input.error,
textarea.error {
  border-color: var(--color-error);
}

/* ============================================
   模态框样式
   ============================================ */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--surface-overlay);
  backdrop-filter: blur(4px);
  z-index: var(--z-modal-backdrop);
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal {
  background: var(--color-background-white);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  box-shadow: var(--shadow-2xl);
  max-width: 500px;
  width: 90%;
  z-index: var(--z-modal);
}

/* ============================================
   加载指示器
   ============================================ */

.spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-border-light);
  border-top-color: var(--color-primary);
  border-radius: var(--radius-full);
  animation: spin 0.6s linear infinite;
}

/* 骨架屏 */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-border-light) 0%,
    var(--color-background-gray) 50%,
    var(--color-border-light) 100%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
  border-radius: var(--radius-md);
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ============================================
   响应式设计
   ============================================ */

/* 移动设备 */
@media (max-width: 767px) {
  :root {
    --font-size-base: 16px; /* 防止 iOS 缩放 */
  }

  .btn {
    min-height: var(--touch-target-min);
  }
}

/* 平板设备 */
@media (min-width: 768px) and (max-width: 1023px) {
  /* 平板特定样式 */
}

/* 桌面设备 */
@media (min-width: 1024px) {
  /* 桌面特定样式 */
}

/* ============================================
   深色模式覆盖
   ============================================ */

:root.dark {
  /* 状态颜色 - 深色模式下调整 */
  --color-success: #34D399;
  --color-success-bg: rgba(16, 185, 129, 0.15);
  --color-success-border: #10B981;

  --color-warning: #FBBF24;
  --color-warning-bg: rgba(251, 191, 36, 0.15);
  --color-warning-border: #F59E0B;

  --color-error: #F87171;
  --color-error-bg: rgba(248, 113, 113, 0.15);
  --color-error-border: #EF4444;

  --color-info: #60A5FA;
  --color-info-bg: rgba(96, 165, 250, 0.15);
  --color-info-border: #3B82F6;

  /* 焦点阴影 - 深色模式下更明显 */
  --shadow-focus: 0 0 0 3px rgba(56, 189, 248, 0.4);
  --shadow-focus-error: 0 0 0 3px rgba(248, 113, 113, 0.4);

  /* 阴影 - 深色模式下调整 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.5);
  --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.6);
}

/* 深色模式下的按钮样式 */
:root.dark .btn-secondary {
  background: transparent;
  color: var(--color-primary-light);
  border-color: var(--color-primary);
}

:root.dark .btn-secondary:hover:not(:disabled) {
  background: var(--color-primary-100);
}

/* 深色模式下的卡片样式 */
:root.dark .card {
  background: var(--color-background-white);
  border: 1px solid var(--color-border-light);
}

:root.dark .card-glass {
  background: var(--surface-glass);
  border-color: var(--color-border-medium);
}

/* 深色模式下的输入框样式 */
:root.dark input,
:root.dark textarea,
:root.dark select {
  background: var(--color-background-white);
  border-color: var(--color-border-medium);
  color: var(--color-text-primary);
}

:root.dark input::placeholder,
:root.dark textarea::placeholder {
  color: var(--color-text-muted);
}

:root.dark input:hover,
:root.dark textarea:hover,
:root.dark select:hover {
  border-color: var(--color-border-strong);
}

:root.dark input:focus,
:root.dark textarea:focus,
:root.dark select:focus {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-focus);
}

/* 深色模式下的模态框 */
:root.dark .modal {
  background: var(--color-background-white);
  border: 1px solid var(--color-border-medium);
}

/* 深色模式下的骨架屏 */
:root.dark .skeleton {
  background: linear-gradient(
    90deg,
    var(--color-border-light) 0%,
    var(--color-background-gray) 50%,
    var(--color-border-light) 100%
  );
}

/* 深色模式下的加载指示器 */
:root.dark .spinner {
  border-color: var(--color-border-medium);
  border-top-color: var(--color-primary);
}
